<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>FOSDEM 2022</title>
    
    <link rel="stylesheet" href="dist/reset.css">
    <link rel="stylesheet" href="dist/reveal.css">
    <link rel="stylesheet" href="dist/fosdem2022.css">
    <link rel="stylesheet" href="dist/extra.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="plugin/highlight/monokai.css">
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
	<section data-background='https://live.staticflickr.com/65535/51626169755_1ed4a07631_k_d.jpg'><h1>The manifold joys of <em>Meta</em>programming</h1>
	  <h2>JJ Merelo</h2>
	</section>

	<section><h1>Metaprogramming <a href="https://stackoverflow.com/questions/514644/what-exactly-is-metaprogramming">is</a></h1>
	  <h2 class='fragment'>"Having knowledge or letting a program manipulate
	  itself"</h2>
	</section>

	<section><h1>So it includes </h1>
            <h2 class="fragment">Introspection</h2>
	    <h2 class='fragment'>Overloading</h2>
	    <h2 class='fragment'>Macros/AST</h2>
	    <h2 class='fragment'>Access to HOW</h2>
	</section>

        <section><h1>Everyone introspects</h1>
            <pre><code data-background="3|13">package HitosIV
import (
	"reflect"
	"testing"
	"os"
)
func TestMain(m *testing.M) {
	_ = ReadsFromFile("./hitos_test.json") // Alternative test file
	os.Exit(m.Run())
}
func TestTodosHitos(t *testing.T) {
	t.Log("Test Todos")
	these_milestones := Hitos()
	if reflect.TypeOf(these_milestones).String() == "Data" {
		t.Error("No milestones here")
	}
}</code></pre>

            <aside class="notes">Introspection in one way or another is the
            bread and butter of almost every modern language, interpreted or
            otherwise. Not complicated to find it. Using that, we can find out
            the type of something, or even check out how somethign is
                stored. Not a greeat deal</aside>
        </section>

        <section><h1>Introspection is to metaprogramming</h1>
            <h2 class="fragment">as variables to a whole program</h2>
            <h3 class="fragment">You can watch, but not change a lot</h3>
        </section>

        <section><h1>Overloading changes the meaning of commands/operators</h1>
            <h2 class="fragment">Not really hard</h2>
            <h3 class="fragment">Overloading <em>operators</em>, a bit
                tougher</h3>
        </section>

        <section><h1>But Lua can do it:</h1>
            <pre><code data-line-numbers="11|4,7|4,12|7,13">local complex = { r= 3, i= 5 }

local mti = {
   __tostring = function( n )
      return n.r.."+".. n.i.."i"
   end,
   __len = function( n )
      return math.sqrt(n.r*n.r + n.i * n.i)
   end
}
setmetatable( complex, mti )
print( tostring(complex ) )
print( #complex )</code></pre>

            <aside class="fragment">Is the program really manipulating itself?
            Well, tostring has a new meaning to to a certain point it is,
            although it's more doing something similar to multiple dispatch, by
                making commands behave differently depending on the operators.</aside>
        </section>

        <section><h1>Macros take this one step further</h1>
            <h2 class="fragment">Programs are parsed to an Abstract Syntax
                Tree</h2>
        </section>

        <section><h1>Macros rewrite that syntax tree</h1></section>
      </div>
    </div>

    
    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>Reveal.initialize({
			  hash: true,
			  width: '95%',
			  controls: true,
			  progress: true,
			  plugins: [ RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
